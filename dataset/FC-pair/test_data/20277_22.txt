contract c20277{
  // low level token purchase function
  function buyTokens(address beneficiary) public payable 
  {
    require(beneficiary != address(0));
    require(validPurchase());
    uint256 weiAmount = msg.value;
    // validate if hardcap reached
    require(weiRaised.add(weiAmount) < HARD_CAP);
    // calculate token amount to be created
    uint256 tokens = getTokenAmount(weiAmount);
    // update state
    weiRaised = weiRaised.add(weiAmount);
    token.mint(beneficiary, tokens);
    TokenPurchase(msg.sender, beneficiary, weiAmount, tokens);
    // for every token given away, half a token is minted to the treasury pool
    token.mint(POOL, tokens/2);
    forwardFunds();
  }
}